## Pythonによる微分積分（Calculus）の基本実装

このセクションでは、Pythonのライブラリを使用して数学的な微分・積分を行い、その結果を可視化するコードの解説を行います。

### 使用モジュールの役割
* **`sympy` (Symbolic Python)**: 
    * 数式を「文字（記号）」のまま扱うライブラリです。
    * 手計算と同じように微分・積分の「式」を導き出します。
* **`numpy`**: 
    * 数値計算を高速に行うためのライブラリです。
    * グラフ描画用に大量の座標データ（$x, y$ の値のリスト）を生成します。
* **`matplotlib.pyplot`**: 
    * グラフを描画するためのライブラリです。
    * データのプロット、色の塗りつぶし、ラベルの追加などを行います。

---

### コードの解説（ステップ別）

1.  **数式の定義 (`sp.Symbol`, `f = x**2`)**
    * `sp.Symbol('x')` で、文字 `x` を数学的な変数として定義します。
    * これにより、Pythonの変数としてではなく、数式の一部として $x$ を扱えるようになります。

2.  **微分の実行 (`sp.diff`)**
    * `sp.diff(f, x)` を呼び出すことで、関数 $f$ を $x$ で微分します（$f'(x) = 2x$）。
    * この操作は英語で **Differentiation** と呼ばれます。

3.  **定積分の実行 (`sp.integrate`)**
    * `sp.integrate(f, (x, 0, 2))` は、「関数 $f$ を、変数 $x$ について $0$ から $2$ までの範囲で積分する」という意味です。
    * これにより、グラフの下側の面積（**Area**）が求められます。

4.  **データの数値化 (`np.linspace`)**
    * `np.linspace(-1, 3, 100)` で、$-1$ から $3$ までの間を等間隔に $100$ 個に区切った数値のリストを作成します。
    * グラフを滑らかに描くための「点」のデータになります。

5.  **可視化のテクニック (`fill_between`, `scatter`)**
    * `plt.fill_between(...)`: 積分範囲を視覚的に示すために、特定の範囲を色（オレンジ）で塗りつぶします。
    * `plt.scatter(...)`: 微分係数が $0$ になる点（傾きが $0$、つまり最小値や最大値）を強調してプロットします。

---

### 用語対応表

| 日本語 | 英語 (Calculus) | コードでの実装例 |
| :--- | :--- | :--- |
| 変数 | Symbol / Variable | `sp.Symbol('x')` |
| 微分 | Differentiation | `sp.diff(f, x)` |
| 積分 | Integration | `sp.integrate(f, x)` |
| 面積 | Area | `sp.integrate(f, (x, a, b))` |
| 極小値/最小値 | Minimum | `plt.scatter([0], [0])` |


### シミュレーション：コスト変動と最適価格の相関

原材料費（Variable Cost）が変動した際の、利益最大化ポイントの変化を微分で算出しました。

#### 考察
- **コスト転嫁の最適化**: 単位コストが10円上昇した場合でも、需要曲線との相関により、販売価格への転嫁は5円に留めるのが数学的に最も合理的であるという結果が得られました。
- **限界収益（Marginal Revenue）**: `sp.diff` を用いることで、常に変化する市場環境において「利益が減少に転じる分岐点」をリアルタイムに特定することが可能です。
