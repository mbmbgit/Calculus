"""
è¨ˆç®—çµæžœã¨è§£èª¬ ðŸ“Šã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒä¸€æ°—ã«ã‚ã‹ã‚Šã¾ã™ã€‚

å¾®åˆ†ã®å¿œç”¨ï¼ˆã‚°ãƒ©ãƒ•ã®å½¢ï¼‰ï¼šè¨ˆç®—çµæžœï¼š$f'(x) = 2x$$2x = 0$ ã¨ãªã‚‹ç‚¹ï¼ˆ$x=0$ï¼‰ãŒã€ã‚°ãƒ©ãƒ•ã®ã€Œè°·ï¼ˆæœ€å°å€¤ï¼‰ã€ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã“ã‚ŒãŒã€Œæ¥µå€¤ã€ã®è€ƒãˆæ–¹ã§ã™ã€‚

ç©åˆ†ã®å¿œç”¨ï¼ˆé¢ç©ï¼‰ï¼šè¨ˆç®—çµæžœï¼š$8/3$ï¼ˆç´„ $2.67$ï¼‰ã‚°ãƒ©ãƒ•ä¸Šã® $x=0$ ã‹ã‚‰ $x=2$ ã¾ã§ã®ä¸‹å´ã®ã‚¨ãƒªã‚¢ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ã®éƒ¨åˆ†ï¼‰ã‚’åˆè¨ˆã™ã‚‹ã¨ã€ã“ã®æ•°å€¤ã«ãªã‚Šã¾ã™ã€‚

â˜• å°‘ã—ä¼‘æ†©ï¼šå¾®åˆ†ç©åˆ†ã¯ã©ã“ã§å½¹ã«ç«‹ã¤ã®ï¼Ÿï¼ˆé›‘å­¦ï¼‰è¨ˆç®—ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå®Ÿä¸–ç•Œã®å•é¡ŒãŒè§£ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

å¾®åˆ†ï¼š ã€Œæœ€ã‚‚åŠ¹çŽ‡ãŒè‰¯ã„ãƒã‚¤ãƒ³ãƒˆã€ã‚’è¦‹ã¤ã‘ã‚‹ã€‚ä¾‹ï¼š åˆ©ç›Šã‚’æœ€å¤§ã«ã™ã‚‹ãŸã‚ã®ä¾¡æ ¼è¨­å®šã‚„ã€ãƒ­ã‚±ãƒƒãƒˆãŒæœ€ã‚‚åŠ é€Ÿã™ã‚‹çž¬é–“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨ˆç®—ã™ã‚‹ã®ã«ä½¿ã‚ã‚Œã¾ã™ã€‚

ç©åˆ†ï¼š ã€Œå¤‰åŒ–ã™ã‚‹ã‚‚ã®ã®åˆè¨ˆã€ã‚’æ±‚ã‚ã‚‹ã€‚ä¾‹ï¼š ä¸è¦å‰‡ã«å¤‰åŒ–ã™ã‚‹é¢¨é€Ÿã‹ã‚‰å»ºç‰©ã«ã‹ã‹ã‚‹ã€Œç·åœ§åŠ›ã€ã‚’è¨ˆç®—ã—ãŸã‚Šã€æ™‚é–“ã”ã¨ã«å¤‰ã‚ã‚‹é›»åŠ›æ¶ˆè²»é‡ã‹ã‚‰ã€Œä¸€æ—¥ã®ç·é›»æ°—ä»£ã€ã‚’ç®—å‡ºã—ãŸã‚Šã™ã‚‹ã®ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
"""


import sympy as sp
import numpy as np
import matplotlib.pyplot as plt

# 1. æ•°å¼ã®å®šç¾©
x = sp.Symbol('x')
f = x**2

# --- å¾®åˆ† ---
df = sp.diff(f, x)  # f(x)ã‚’å¾®åˆ†
print(f"å¾®åˆ†: f'(x) = {df}")

# --- ç©åˆ† (é¢ç©) ---
# 0ã‹ã‚‰2ã¾ã§ã®ç¯„å›²ã®é¢ç©ã‚’æ±‚ã‚ã‚‹ï¼ˆå®šç©åˆ†ï¼‰
area = sp.integrate(f, (x, 0, 2))
print(f"x=0ã‹ã‚‰2ã¾ã§ã®é¢ç©: {area} (ç´„ {float(area):.2f})")

# --- ã‚°ãƒ©ãƒ•ã®æç”» ---
x_vals = np.linspace(-1, 3, 100)
y_vals = x_vals**2

plt.plot(x_vals, y_vals, label="f(x) = x^2", color='blue')
# é¢ç©ï¼ˆç©åˆ†ã®ç¯„å›²ï¼‰ã‚’å¡—ã‚Šã¤ã¶ã™
plt.fill_between(x_vals, y_vals, where=(x_vals>=0)&(x_vals<=2), color='orange', alpha=0.3, label="Area (0 to 2)")
# å¾®åˆ†=0ã®ç‚¹ï¼ˆå±±ã‚„è°·ï¼‰ã‚’ãƒ—ãƒ­ãƒƒãƒˆ
plt.scatter([0], [0], color='red', label="Minimum (f'(x)=0)")

plt.legend()
plt.grid(True)
plt.show()
